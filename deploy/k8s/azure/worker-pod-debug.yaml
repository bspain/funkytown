apiVersion: v1
kind: Pod
metadata:
  name: funkytown-worker-debug
spec:
  volumes:
  - name: dshm
    emptyDir:
      medium: Memory
  containers:
  - name: funkytown-worker
    command: [ "/bin/sh" ]
    args: ["-c", "while true; do tail -f /dev/null; sleep 60000;done"]
    image: worker
    imagePullPolicy: IfNotPresent
    env:
      - name: REDIS_HOST
        value: funkytown-workqueue-service
      - name: REDIS_PORT
        value: "6379"
    volumeMounts:
      - mountPath: /dev/shm
        name: dshm
    resources:
      requests:
        memory: 2048Mi
        cpu: 500m
      limits:
        memory: 4096Mi
        cpu: 2000m
  restartPolicy: Never
  hostIPC: true
